# Mosquitto MQTT Broker Configuration for Carbon Capture Network

# Basic configuration
listener 1883
protocol mqtt

# Authentication
allow_anonymous false
password_file /mosquitto/config/password.txt

# Persistence
persistence true
persistence_location /mosquitto/data/
autosave_interval 1800

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning
log_type notice
log_type information
log_type debug
connection_messages true
log_timestamp true

# Security
require_certificate false
use_identity_as_username false

# Performance tuning
max_connections 1000
max_queued_messages 200
message_size_limit 0
memory_limit 256MB

# Quality of Service
max_inflight_messages 20
max_queued_bytes 0

# Topic restrictions
# Allow all topics for carbon capture network
# topic # both 0

# Bridge configuration (optional - for connecting to external MQTT brokers)
# connection bridge-01
# address broker.example.com:1883
# topic sensors/# both 0
# topic commands/# both 0
# topic status/# both 0

# WebSocket support
listener 8883
protocol websockets
allow_anonymous false
password_file /mosquitto/config/password.txt

# SSL/TLS configuration (uncomment when certificates are available)
# listener 8883
# protocol websockets
# cafile /mosquitto/ssl/ca.crt
# certfile /mosquitto/ssl/server.crt
# keyfile /mosquitto/ssl/server.key
# require_certificate false
# use_identity_as_username false

# Keep alive settings
keepalive_interval 60
max_keepalive 300

# System topic settings
sys_interval 10
